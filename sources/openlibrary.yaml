namespace:
  'openlibrary'
url: 
  http://openlibrary.org

parameters: &prms
  searchfields: &sflds
    mode: field
    keys:
      [title,
      author,
      subject]

  metafields: &mflds
    mode: field
    keys: 
      [
      #IDENTIFICATION
      id,
      key,
      identifiers,
      classifications,
      lc_classifications,
      ia_box_id,
      ia_loaded_id,
      ocaid,
      isbn_13,
      isbn_10,
      lccn,
      oclc_numbers,
      dewey_decimal_class,
      
      #TYPES
      type,
      works,
      editions,
      authors,

      #PERSONS
      author,       
      name,
      personal_name,
      alternate_names,
      bio,
      birth_date,
      death_date,
      contributions,

      #TITLES
      title, 
      full_title,
      subtitle,

      #TEXT
      by_statement,
      excerpts,
      covers,
      first_sentence,
      notes,
      table_of_contents,
      pagination,

      #DESCRIPTION
      description,
      edition_name,
      
      #LANGUAGE
      languages,

      #SERIES
      series,

      #REFERENCE
      source_records,
      marc,
      photograph,
      photos,
      wikipedia,

      #GENRE
      genres,

      #SUBJECTS
      subject,
      subjects,
      subject_times,
      subject_people,

      #PUBLISHING
      publisher,
      publish_date,
      first_publish_date,
      publish_country,
      publish_places,

      #TIME
      created,
      last_modified,
      revision,
      latest_revision,

      #PHYSICAL
      number_of_pages,
      physical_dimensions,
      physical_format,
      weight
      
      ]
    
  library_identifiers_upper: &libidsup
    mode: field
    keys: [ISBN, LCCN, OCLC, OLID]

  library_identifiers_lower: &libidslow
    mode: field
    keys: [isbn, lccn, oclc, olid]

  types:
    mode: prototype
    key: {'type': '/type/'}

    about:
      parameters:
        title: ' '
        #NOT INDEXED
        #body:
    
    author_role:
      parameters:
        author: {key: '/authors/'}

    author:
      parameters:
        name: ' '
        eastern_order: ' '
        personal_name: ' '
        enumeration: ' '
        title: ' '
        alternate_names: []
        uris: []        
        #NOT INDEXED
        #bio: ' '          
        location: ' '
        birth_date: ' '
        death_date: ' '
        date: ' '
        wikipedia: ' '
        links: []

    collection:
      parameters:
        name: ' '

    content:
      parameters:
        title: ' '
        #NOT INDEXED
        #body:

    contribution:
      parameters:
        role: ' '
        contributor: ' '
              
    doc:
      parameters:
        title: ' '
        #NOT INDEXED
        #body:

    edition:
      parameters:
        title: ' '
        title_prefix: ' '
        subtitle: ' '
        other_titles: []
        authors: []
        by_statement: ' '
        publish_date: ' '
        copyright_date: ' '
        edition_name: ' '
        
        languages: ['/languages/']
        
        #NOT INDEXED
        #description:' '
        #notes of type /type/text
        genres: []
        
        table_of_contents:
          class: ' '
          label: ' '
          title: ' '
          pagenum: ' '
        
        work_titles: []
        series: []
        physical_dimensions: ' '
        physical_format: ' '
        number_of_pages: ' '
        subjects: []
        pagination: ' '
        lccn: []
        ocaid: ' '
        oclc_numbers: []
        isbn_10: [] 
        isbn_13: [] 
        dewey_decimal_class: [] 
        lc_classifications: [] 
        contributions: [] 
        publish_places: [] 
        publish_country: ' '
        publishers: []
        distributors: []
        #NOT INDEXED
        #first_sentence: ' '
        weight: ' '
        location: []
        scan_on_demand: ' '
        
        #collections: [] of type /type/collection
        
        uris: []
        uri_descriptions: []
        translation_of: ' '
        works: []
        source_records: []
        
        #translated_from[] of type /type/language
        
        #scan_records[] of type /type/scan_record
        #volumes[] of type /type/volume
        
        accompanying_material: ' '

    #TODO
    # what is this?
    home:
      parameters:
        title: ' '
        #NOT INDEXED
        #body:
        #news:
        #stats:

    #TODO
    #searchable?
    language:
      parameters:
        name: ' '
        code: ' '
        library_of_congress_name: ' '

    library:
      parameters:
        #ip_ranges: ' '
        website: ' '
        contact_person: ' '
        contact_email: ' '
        country: ' '
        #addresses: ' '
        telephone: ' '

    library_address:
      parameters:    
        name: ' '
        street: ' '
        city: ' '
        state: ' '
        postal_code: ' '
        latitude: ' '
        longitude: ' '
        telephone: ' '
        website: ' '

    #TODO
    #TEST
    link:
      parameters:
        title: ' '
        url: ' '
    
    #TODO
    #TEST
    list:
      parameters:
        name: ' '
        #description: ' '
        tags: []

    #TODO
    #TEST
    macro:
      parameters:
        #macro:
        description: ' '

    page:
      parameters:
        title: ' '
        #body: ' '

    #TOTO
    #permission:


    #TODO
    #searchable?
    place:
      parameters:        
        name: ' '
        latitude: ' '
        longitude: ' '
        zoom_level: ' '
        kind: ' '
        highlights: [] 
        is_in: [] 
        marc_names: [] 

    #TODO
    #searchable?
    property:
      parameters:
        expected_type: '/type/'

    #TODO
    scan_location:
      parameters:
        name: ' '

     
    #series:
    #  parameters:        
    #    title: ' '
    #    original_language: '/language/'
    #    subjects: []
    #    subject_places: []
    #    subject_times: [] 
    #    genres: []
    #    #description:
    #    works: ['/work/'] 
    #    links: ['/link/'] 


    #subject:
    #  parameters:
    #    name: ' ' 

    #toc_item:
    #  parameters:
    #    class: ' '
    #    label: ' '
    #    title: ' '
    #    pagenum: ' '

    #type:
    #  parameters:
    #    name: ' '

    user:
      parameters:
        displayname: ' '
        website: []
        #description: ' '
        bot: ' '

    usergroup:
      parameters:
        #description:
        members: ['/people/']

    volume:
      parameters:
        ia_id: ' '
        volume_number: ' '

    work:
      parameters:
        title:  ' '
        subtitle: ' '
        authors: 
          author: {key: '/authors/'}
        translated_titles:
          text: ' '
          language: {key: '/languages/'}
        subjects: []
        subject_places: []
        subject_times: []
        subject_people: []
        #NOT INDEXED
        #description:        
        dewey_number: []
        lc_classifications: []
        #NOT INDEXED
        #first_sentence:        
        #TODO
        #original_languages:        
        other_titles: []
        first_publish_date: ''
        #TODO
        links: 
          title: ' '
          url: ' '
        #NOT INDEXED
        #notes:
        #TODO
        #cover_edition: 
        covers: []
          
api: 
  books: &bks
    namespace: 'books'
    path: /api/books?bibkeys=
    input: 
      type: key_value
      params: *libidsup
      options: [format, callback, jscmd]
      param_bind_chain: [':', ',']
      option_bind_chain: ['=', '&']

  volumes_brief: &volsbrief
    namespace: 'volumes_brief'
    path: /api/volumes/brief/
    input:
      type: key_value
      params: *libidslow
      options: [callback]
      param_bind_chain: ['/', '.json']
      option_bind_chain: ['=','?']

  multi_volumes_brief: &multivolsbrief
    namespace: 'multi_volumes_brief'
    path: /api/volumes/brief/json/
    input:
      type: key_value
      params: *libidslow
      options: [callback]
      multi_value: True
      param_bind_chain: [':', ';']
      option_bind_chain: ['=','?']
      multi_bind_chain: ['|', '|']

  volumes_full: &volsfull
    namespace: 'volumes_full'
    path: /api/volumes/full/
    input:
      type: key_value
      params: *libidslow
      options: [callback]
      param_bind_chain: ['/', '.json']
      option_bind_chain: ['=','?']

  multi_volumes_full: &multivolsfull
    namespace: 'multi_volumes_full'
    path: /api/volumes/full/json/
    input:
      type: key_value
      params: *libidslow
      options: [callback]
      param_bind_chain: [':', ';']
      option_bind_chain: ['=','?']
      multi_bind_chain: ['|', '|']

  things: &thngs
    namespace: 'things'
    path: /api/things?query=
    input:
      type: json
      params: *prms
      options: Null

  query: &qry
    namespace: 'query'
    path: /query.json?query=
    input:
      type: json
      params: *prms
      options: [limit, offset, "*", *mflds]
      
  search: &srch
    namespace: 'search'
    path: /search.json?
    input: 
      type: key_value
      params: *sflds
      options: Null
      param_bind_chain: ["=", "&"]
      option_bind_chain: ["=", "&"]
      lazy_key: 'q'

  default: *qry
